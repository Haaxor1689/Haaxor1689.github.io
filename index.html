<!DOCTYPE html>
<html>

<head>
  <script>
    function getURLParameter(sParam) {
      var sPageURL = window.location.search.substring(1);
      var sURLVariables = sPageURL.split('&');
      for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) {
          return sParameterName[1];
        }
      }
    }

    function changeLanguage(newLang) {
      window.location.search = "&lang=" + newLang;
    }

    function loadXMLDoc(filename) {
      if (window.ActiveXObject) {
        xhttp = new ActiveXObject("Msxml2.XMLHTTP");
      }
      else {
        xhttp = new XMLHttpRequest();
      }
      xhttp.open("GET", filename, false);
      try { xhttp.responseType = "msxml-document" } catch (err) { } // Helping IE11
      xhttp.send("");
      return xhttp.responseXML;
    }

    function displayResult() {
      var lang = getURLParameter("lang");
      if (lang == null) {
        window.location.search = '&lang=gb';
      }

      xml = loadXMLDoc("portfolio.xml");
      xsl = loadXMLDoc("style.xsl");
      // code for IE
      if (window.ActiveXObject || xhttp.responseType == "msxml-document") {
        ex = xml.transformNode(xsl);
        document.getElementById("document").innerHTML = ex;
      }
      // code for Chrome, Firefox, Opera, etc.
      else if (document.implementation && document.implementation.createDocument) {
        xsltProcessor = new XSLTProcessor();
        xsltProcessor.importStylesheet(xsl);
        xsltProcessor.setParameter(null, "lang", getURLParameter("lang"));
        resultDocument = xsltProcessor.transformToFragment(xml, document);
        document.getElementById("document").appendChild(resultDocument);
      }
    }
  </script>
</head>

<body onload="displayResult()">
  <div id="document">
</body>

</html>